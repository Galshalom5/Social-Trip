{"ast":null,"code":"import _slicedToArray from \"/Users/galshalom/Desktop/Social-Trip/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/galshalom/Desktop/Social-Trip/src/Admin/Components/GalleryTable.js\";\n\nimport React from \"react\";\nimport { MDBDataTable, MDBContainer, MDBBtn, MDBModalFooter, MDBModalHeader, MDBModal, MDBRow } from \"mdbreact\";\nimport { useEffect, useState, useRef } from \"react\";\nimport { storage, db } from \"../../index\";\nimport UploadPicture from \"../UploadPicture.js\";\n\nvar GalleryTable = function GalleryTable() {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      open = _useState2[0],\n      setopen = _useState2[1];\n\n  var pictureIdRef = useRef(null);\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      pictures = _useState4[0],\n      setfeedBacks = _useState4[1];\n\n  var _useState5 = useState({\n    index: 1\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      modalIsOpen = _useState6[0],\n      setmodalIsOpen = _useState6[1];\n\n  var objArray = [];\n  var data = {\n    columns: [{\n      label: \"שם\",\n      field: \"name\",\n      sort: \"asc\",\n      width: 150\n    }, {\n      label: \"תמונה\",\n      field: \"picture\",\n      sort: \"asc\",\n      width: 270\n    }, {\n      label: \"מחק תמונה\",\n      field: \"delete\",\n      sort: \"asc\",\n      width: 100\n    }],\n    rows: pictures\n  }; //   const areYouSure = (feedBack) => {\n  //     feedBackIdRef.current = feedBack.target.id;\n  //     setopen(true);\n  //   };\n  //   const deleteHandler = () => {\n  //     db.collection(\"FeedBack\")\n  //       .doc(`${feedBackIdRef.current}`)\n  //       .delete()\n  //       .then(function () {\n  //         console.log(\"Document successfully deleted!\");\n  //         setopen(false);\n  //       })\n  //       .catch(function (error) {\n  //         console.error(\"Error removing document: \", error);\n  //       });\n  //   };\n\n  useEffect(function () {\n    var storageRef = storage.ref();\n    var imagesRef = storageRef.child(\"CaruselPhotos\");\n    imagesRef.listAll().then(function (res) {\n      res.items.forEach(function (element) {\n        element.getDownloadURL().then(function (url) {\n          objArray.push({\n            name: element.name,\n            imageUrl: url,\n            delete: /*#__PURE__*/React.createElement(MDBBtn, {\n              size: \"sm\",\n              outline: true,\n              color: \"danger\",\n              id: \"\".concat(item.id),\n              onClick: areYouSure,\n              __self: _this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 19\n              }\n            }, \"\\u05DE\\u05D7\\u05E7\")\n          });\n        });\n      });\n    }); // db.collection(\"FeedBack\")\n    //   .get()\n    //   .then((querySnapshot) => {\n    //     querySnapshot.forEach((item) => {\n    //       objArray.push({\n    //         name: item.data().name,\n    //         feedBackTxt: item.data().feedBackTxt,\n    //         delete: (\n    //           <MDBBtn\n    //             size=\"sm\"\n    //             outline\n    //             color=\"danger\"\n    //             id={`${item.id}`}\n    //             onClick={areYouSure}\n    //           >\n    //             מחק\n    //           </MDBBtn>\n    //         ),\n    //       });\n    //     });\n    //     setfeedBacks(objArray);\n    //   });\n  }, [open, modalIsOpen]);\n  return /*#__PURE__*/React.createElement(MDBContainer, {\n    style: {\n      backgroundColor: \"white\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(MDBDataTable, {\n    entriesLabel: \"\\u05DE\\u05E1\\u05E4\\u05E8 \\u05D4\\u05E2\\u05E8\\u05DB\\u05D9\\u05DD \\u05D1\\u05D8\\u05D1\\u05DC\\u05D4\",\n    paginationLabel: [\"הקודם\", \"הבא\"],\n    infoLabel: [\"מראה\", \"עד\", \"מתוך\", \"ערכים\"],\n    className: \"text-right justify-content-center\",\n    searchLabel: \"\\u05D7\\u05D9\\u05E4\\u05D5\\u05E9\",\n    btn: true,\n    scrollY: true,\n    maxHeight: \"65vh\",\n    striped: true,\n    bordered: true,\n    small: true,\n    data: data,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(MDBModal, {\n    isOpen: open,\n    toggle: function toggle() {\n      return setopen(false);\n    },\n    backdrop: true,\n    size: \"sm\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(MDBModalHeader, {\n    style: {\n      backgroundColor: \"#ff4444\"\n    },\n    className: \"text-white justify-content-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }, \"\\u05D4\\u05D0\\u05DD \\u05DC\\u05DE\\u05D7\\u05D5\\u05E7 \\u05D0\\u05EA \\u05D4\\u05EA\\u05DE\\u05D5\\u05E0\\u05D4?\"), /*#__PURE__*/React.createElement(MDBModalFooter, {\n    className: \"justify-content-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(MDBBtn, {\n    color: \"danger\",\n    onClick: function onClick() {\n      return setopen(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 11\n    }\n  }, \"\\u05D1\\u05D9\\u05D8\\u05D5\\u05DC\"), /*#__PURE__*/React.createElement(MDBBtn, {\n    outline: true,\n    color: \"danger\",\n    onClick: deleteHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 11\n    }\n  }, \"\\u05DE\\u05D7\\u05E7\"))), /*#__PURE__*/React.createElement(MDBRow, {\n    className: \"text-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(UploadFeedBack, {\n    value: function value(i) {\n      return setmodalIsOpen({\n        index: i\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default GalleryTable;","map":{"version":3,"sources":["/Users/galshalom/Desktop/Social-Trip/src/Admin/Components/GalleryTable.js"],"names":["React","MDBDataTable","MDBContainer","MDBBtn","MDBModalFooter","MDBModalHeader","MDBModal","MDBRow","useEffect","useState","useRef","storage","db","UploadPicture","GalleryTable","open","setopen","pictureIdRef","pictures","setfeedBacks","index","modalIsOpen","setmodalIsOpen","objArray","data","columns","label","field","sort","width","rows","storageRef","ref","imagesRef","child","listAll","then","res","items","forEach","element","getDownloadURL","url","push","name","imageUrl","delete","item","id","areYouSure","backgroundColor","deleteHandler","i"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {\n  MDBDataTable,\n  MDBContainer,\n  MDBBtn,\n  MDBModalFooter,\n  MDBModalHeader,\n  MDBModal,\n  MDBRow,\n} from \"mdbreact\";\nimport { useEffect, useState, useRef } from \"react\";\nimport { storage, db } from \"../../index\";\nimport UploadPicture from \"../UploadPicture.js\";\n\nconst GalleryTable = () => {\n  const [open, setopen] = useState(false);\n  const pictureIdRef = useRef(null);\n  const [pictures, setfeedBacks] = useState([]);\n  const [modalIsOpen, setmodalIsOpen] = useState({ index: 1 });\n  const objArray = [];\n  const data = {\n    columns: [\n      {\n        label: \"שם\",\n        field: \"name\",\n        sort: \"asc\",\n        width: 150,\n      },\n      {\n        label: \"תמונה\",\n        field: \"picture\",\n        sort: \"asc\",\n        width: 270,\n      },\n      {\n        label: \"מחק תמונה\",\n        field: \"delete\",\n        sort: \"asc\",\n        width: 100,\n      },\n    ],\n\n    rows: pictures,\n  };\n\n//   const areYouSure = (feedBack) => {\n//     feedBackIdRef.current = feedBack.target.id;\n//     setopen(true);\n//   };\n\n//   const deleteHandler = () => {\n//     db.collection(\"FeedBack\")\n//       .doc(`${feedBackIdRef.current}`)\n//       .delete()\n//       .then(function () {\n//         console.log(\"Document successfully deleted!\");\n//         setopen(false);\n//       })\n//       .catch(function (error) {\n//         console.error(\"Error removing document: \", error);\n//       });\n//   };\n\n  useEffect(() => {\n    const storageRef = storage.ref();\n    const imagesRef = storageRef.child(\"CaruselPhotos\");\n    imagesRef.listAll().then((res) => {\n        res.items.forEach((element) => {\n          element.getDownloadURL().then((url) => {\n            objArray.push({\n                name: element.name,\n                imageUrl:url,\n                delete: (\n                  <MDBBtn\n                    size=\"sm\"\n                    outline\n                    color=\"danger\"\n                    id={`${item.id}`}\n                    onClick={areYouSure}\n                  >\n                    מחק\n                  </MDBBtn>\n                ),\n              });\n          });\n        });\n      });\n\n    // db.collection(\"FeedBack\")\n    //   .get()\n    //   .then((querySnapshot) => {\n    //     querySnapshot.forEach((item) => {\n    //       objArray.push({\n    //         name: item.data().name,\n    //         feedBackTxt: item.data().feedBackTxt,\n    //         delete: (\n    //           <MDBBtn\n    //             size=\"sm\"\n    //             outline\n    //             color=\"danger\"\n    //             id={`${item.id}`}\n    //             onClick={areYouSure}\n    //           >\n    //             מחק\n    //           </MDBBtn>\n    //         ),\n    //       });\n    //     });\n    //     setfeedBacks(objArray);\n    //   });\n  }, [open, modalIsOpen]);\n\n  return (\n    <MDBContainer style={{ backgroundColor: \"white\" }}>\n      <MDBDataTable\n        entriesLabel=\"מספר הערכים בטבלה\"\n        paginationLabel={[\"הקודם\", \"הבא\"]}\n        infoLabel={[\"מראה\", \"עד\", \"מתוך\", \"ערכים\"]}\n        className=\"text-right justify-content-center\"\n        searchLabel=\"חיפוש\"\n        btn\n        scrollY\n        maxHeight=\"65vh\"\n        striped\n        bordered\n        small\n        data={data}\n      />\n      <MDBModal\n        isOpen={open}\n        toggle={() => setopen(false)}\n        backdrop={true}\n        size=\"sm\"\n      >\n        <MDBModalHeader\n          style={{ backgroundColor: \"#ff4444\" }}\n          className=\"text-white justify-content-center\"\n        >\n          האם למחוק את התמונה?\n        </MDBModalHeader>\n        <MDBModalFooter className=\"justify-content-center\">\n          <MDBBtn color=\"danger\" onClick={() => setopen(false)}>\n            ביטול\n          </MDBBtn>\n          <MDBBtn outline color=\"danger\" onClick={deleteHandler}>\n            מחק\n          </MDBBtn>\n        </MDBModalFooter>\n      </MDBModal>\n      <MDBRow className=\"text-center\">\n        <UploadFeedBack value={(i) => setmodalIsOpen({ index: i })} />\n      </MDBRow>\n    </MDBContainer>\n  );\n};\n\nexport default GalleryTable;\n"]},"metadata":{},"sourceType":"module"}