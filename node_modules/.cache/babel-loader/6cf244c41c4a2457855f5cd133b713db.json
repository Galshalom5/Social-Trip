{"ast":null,"code":"import _toConsumableArray from \"/Users/galshalom/Desktop/Social-Trip/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/galshalom/Desktop/Social-Trip/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/galshalom/Desktop/Social-Trip/src/Admin/Components/GalleryTable.js\";\n\nimport React from \"react\";\nimport { MDBDataTable, MDBContainer, MDBBtn, MDBModalFooter, MDBModalHeader, MDBModal, MDBRow } from \"mdbreact\";\nimport { useEffect, useState, useRef } from \"react\";\nimport { storage } from \"../../index\";\nimport UploadPicture from \"../UploadPicture.js\";\n\nvar GalleryTable = function GalleryTable() {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      open = _useState2[0],\n      setopen = _useState2[1];\n\n  var pictureNameRef = useRef(null);\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      pictures = _useState4[0],\n      setPictures = _useState4[1];\n\n  var _useState5 = useState({\n    index: 1\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      modalIsOpen = _useState6[0],\n      setmodalIsOpen = _useState6[1];\n\n  var objArray = [];\n  var data = {\n    columns: [{\n      label: \"שם\",\n      field: \"name\",\n      sort: \"asc\",\n      width: 150\n    }, {\n      label: \"תמונה\",\n      field: \"picture\",\n      sort: \"asc\",\n      width: 270\n    }, {\n      label: \"מחק תמונה\",\n      field: \"delete\",\n      sort: \"asc\",\n      width: 100\n    }],\n    rows: pictures\n  };\n\n  var areYouSure = function areYouSure(picture) {\n    pictureNameRef.current = picture.target.id;\n    setopen(true);\n  };\n\n  var deleteHandler = function deleteHandler() {\n    var storageRef = storage.ref();\n    var imageRef = storageRef.child(\"CaruselPhotos/\".concat(pictureNameRef.current));\n    var thumbnailsRef = storageRef.child(\"CaruselPhotos/thumbnails/\".concat(pictureNameRef.current));\n    imageRef.delete().then(function () {\n      thumbnailsRef.delete().then(function () {\n        setopen(false);\n      }).catch(function (error) {\n        console.error(\"Error removing document: \", error);\n      });\n    }).catch(function (error) {\n      console.error(\"Error removing document: \", error);\n    });\n  };\n\n  useEffect(function () {\n    var storageRef = storage.ref();\n    var imagesRef = storageRef.child(\"CaruselPhotos\");\n    imagesRef.listAll().then(function (res) {\n      res.items.forEach(function (element) {\n        element.getDownloadURL().then(function (url) {\n          // objArray.push({\n          //     name: element.name,\n          //     picture: <img src={url} width=\"150\" height=\"100\" />,\n          //     delete: (\n          //       <MDBBtn\n          //         size=\"sm\"\n          //         outline\n          //         color=\"danger\"\n          //          id={`${element.id}`}\n          //         onClick={areYouSure}\n          //       >\n          //         מחק\n          //       </MDBBtn>\n          //     ),\n          //   });\n          setPictures(function (oldArray) {\n            return [].concat(_toConsumableArray(oldArray), [objArray]);\n          }); //   setPictures(objArray);\n\n          console.log(\"in get downloaded\");\n        });\n      });\n    });\n  }, [open, modalIsOpen]);\n  return (\n    /*#__PURE__*/\n    //   console.log(data),\n    React.createElement(MDBContainer, {\n      style: {\n        backgroundColor: \"white\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(MDBDataTable, {\n      entriesLabel: \"\\u05DE\\u05E1\\u05E4\\u05E8 \\u05D4\\u05E2\\u05E8\\u05DB\\u05D9\\u05DD \\u05D1\\u05D8\\u05D1\\u05DC\\u05D4\",\n      paginationLabel: [\"הקודם\", \"הבא\"],\n      infoLabel: [\"מראה\", \"עד\", \"מתוך\", \"ערכים\"],\n      className: \"text-right justify-content-center\",\n      searchLabel: \"\\u05D7\\u05D9\\u05E4\\u05D5\\u05E9\",\n      btn: true,\n      scrollY: true,\n      maxHeight: \"65vh\",\n      striped: true,\n      bordered: true,\n      small: true,\n      data: data,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(MDBModal, {\n      isOpen: open,\n      toggle: function toggle() {\n        return setopen(false);\n      },\n      backdrop: true,\n      size: \"sm\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(MDBModalHeader, {\n      style: {\n        backgroundColor: \"#ff4444\"\n      },\n      className: \"text-white justify-content-center\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }\n    }, \"\\u05D4\\u05D0\\u05DD \\u05DC\\u05DE\\u05D7\\u05D5\\u05E7 \\u05D0\\u05EA \\u05D4\\u05EA\\u05DE\\u05D5\\u05E0\\u05D4?\"), /*#__PURE__*/React.createElement(MDBModalFooter, {\n      className: \"justify-content-center\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(MDBBtn, {\n      color: \"danger\",\n      onClick: function onClick() {\n        return setopen(false);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }\n    }, \"\\u05D1\\u05D9\\u05D8\\u05D5\\u05DC\"), /*#__PURE__*/React.createElement(MDBBtn, {\n      outline: true,\n      color: \"danger\",\n      onClick: deleteHandler,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }\n    }, \"\\u05DE\\u05D7\\u05E7\"))), /*#__PURE__*/React.createElement(MDBRow, {\n      className: \"text-center\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(UploadPicture, {\n      value: function value(i) {\n        return setmodalIsOpen({\n          index: i\n        });\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }\n    })))\n  );\n};\n\nexport default GalleryTable;","map":{"version":3,"sources":["/Users/galshalom/Desktop/Social-Trip/src/Admin/Components/GalleryTable.js"],"names":["React","MDBDataTable","MDBContainer","MDBBtn","MDBModalFooter","MDBModalHeader","MDBModal","MDBRow","useEffect","useState","useRef","storage","UploadPicture","GalleryTable","open","setopen","pictureNameRef","pictures","setPictures","index","modalIsOpen","setmodalIsOpen","objArray","data","columns","label","field","sort","width","rows","areYouSure","picture","current","target","id","deleteHandler","storageRef","ref","imageRef","child","thumbnailsRef","delete","then","catch","error","console","imagesRef","listAll","res","items","forEach","element","getDownloadURL","url","oldArray","log","backgroundColor","i"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {\n  MDBDataTable,\n  MDBContainer,\n  MDBBtn,\n  MDBModalFooter,\n  MDBModalHeader,\n  MDBModal,\n  MDBRow,\n} from \"mdbreact\";\nimport { useEffect, useState, useRef } from \"react\";\nimport { storage} from \"../../index\";\nimport UploadPicture from \"../UploadPicture.js\";\n\nconst GalleryTable = () => {\n  const [open, setopen] = useState(false);\n  const pictureNameRef = useRef(null);\n  const [pictures, setPictures] = useState([]);\n  const [modalIsOpen, setmodalIsOpen] = useState({ index: 1 });\n  const objArray = [];\n  const data = {\n    columns: [\n      {\n        label: \"שם\",\n        field: \"name\",\n        sort: \"asc\",\n        width: 150,\n      },\n      {\n        label: \"תמונה\",\n        field: \"picture\",\n        sort: \"asc\",\n        width: 270,\n      },\n      {\n        label: \"מחק תמונה\",\n        field: \"delete\",\n        sort: \"asc\",\n        width: 100,\n      },\n    ],\n\n    rows: pictures,\n  };\n\n  const areYouSure = (picture) => {\n    pictureNameRef.current = picture.target.id;\n    setopen(true);\n  };\n\n  const deleteHandler = () => {\n    const storageRef = storage.ref();\n    const imageRef = storageRef.child(`CaruselPhotos/${pictureNameRef.current}`);\n    const thumbnailsRef = storageRef.child(`CaruselPhotos/thumbnails/${pictureNameRef.current}`);\n    imageRef\n      .delete()\n      .then(() => {\n        thumbnailsRef\n          .delete()\n          .then(() => {\n            setopen(false);\n          })\n          .catch(function (error) {\n            console.error(\"Error removing document: \", error);\n          });\n      })\n      .catch(function (error) {\n        console.error(\"Error removing document: \", error);\n      });\n  };\n\n  useEffect(() => {\n    const storageRef = storage.ref();\n    const imagesRef = storageRef.child(\"CaruselPhotos\");\n    imagesRef.listAll().then((res) => {\n        res.items.forEach((element) => {\n          element.getDownloadURL().then((url) => {\n            // objArray.push({\n            //     name: element.name,\n            //     picture: <img src={url} width=\"150\" height=\"100\" />,\n            //     delete: (\n            //       <MDBBtn\n            //         size=\"sm\"\n            //         outline\n            //         color=\"danger\"\n            //          id={`${element.id}`}\n            //         onClick={areYouSure}\n            //       >\n            //         מחק\n            //       </MDBBtn>\n            //     ),\n            //   });\n              setPictures(oldArray => [...oldArray, objArray]);\n            //   setPictures(objArray);\n              console.log(\"in get downloaded\")\n          });  \n        });\n      });\n  }, [open, modalIsOpen]);\n\n  return (\n    //   console.log(data),\n    <MDBContainer style={{ backgroundColor: \"white\" }}>\n      <MDBDataTable\n        entriesLabel=\"מספר הערכים בטבלה\"\n        paginationLabel={[\"הקודם\", \"הבא\"]}\n        infoLabel={[\"מראה\", \"עד\", \"מתוך\", \"ערכים\"]}\n        className=\"text-right justify-content-center\"\n        searchLabel=\"חיפוש\"\n        btn\n        scrollY\n        maxHeight=\"65vh\"\n        striped\n        bordered\n        small\n        data={data}\n      />\n      <MDBModal\n        isOpen={open}\n        toggle={() => setopen(false)}\n        backdrop={true}\n        size=\"sm\"\n      >\n        <MDBModalHeader\n          style={{ backgroundColor: \"#ff4444\" }}\n          className=\"text-white justify-content-center\"\n        >\n          האם למחוק את התמונה?\n        </MDBModalHeader>\n        <MDBModalFooter className=\"justify-content-center\">\n          <MDBBtn color=\"danger\" onClick={() => setopen(false)}>\n            ביטול\n          </MDBBtn>\n          <MDBBtn outline color=\"danger\" onClick={deleteHandler}>\n            מחק\n          </MDBBtn>\n        </MDBModalFooter>\n      </MDBModal>\n      <MDBRow className=\"text-center\">\n        <UploadPicture value={(i) => setmodalIsOpen({ index: i })} />\n      </MDBRow>\n    </MDBContainer>\n  );\n};\n\nexport default GalleryTable;\n"]},"metadata":{},"sourceType":"module"}