{"ast":null,"code":"import _slicedToArray from \"/Users/galshalom/Desktop/Social-Trip/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/galshalom/Desktop/Social-Trip/src/Admin/Components/FeedBackTable.js\";\n\nimport React from 'react';\nimport { MDBDataTable, MDBContainer, MDBIcon, MDBBtn, MDBModalFooter, MDBModalBody, MDBModalHeader, MDBModal, MDBRow } from 'mdbreact';\nimport { useEffect, useState, useRef } from 'react';\nimport { storage, db } from '../../index';\nimport Upload from '../UploadEvent';\n\nvar FeedBackTableNew = function FeedBackTableNew() {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      open = _useState2[0],\n      setopen = _useState2[1];\n\n  var feedBackNameRef = useRef(null);\n  var FeedBackTextRef = useRef(null);\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      feedBacks = _useState4[0],\n      setfeedBacks = _useState4[1];\n\n  var _useState5 = useState({\n    index: 1\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      modalIsOpen = _useState6[0],\n      setmodalIsOpen = _useState6[1];\n\n  var objArray = [];\n  var data = {\n    columns: [{\n      label: 'שם כותב הפידבק',\n      field: 'name',\n      sort: 'asc',\n      width: 150\n    }, {\n      label: 'תוכן הפידבק',\n      field: 'date',\n      sort: 'asc',\n      width: 270\n    }, {\n      label: 'מחק פידבק',\n      field: 'delete',\n      sort: 'asc',\n      width: 100\n    }],\n    rows: feedBacks\n  };\n\n  var areYouSure = function areYouSure(feedBack) {\n    feedBackNameRef.current = feedBack.target.id;\n    setopen(true);\n  };\n\n  var deleteHandler = function deleteHandler() {\n    // var imageUrl\n    db.collection('FeedBack').doc(\"\".concat(feedBackNameRef.current)).delete().then(function () {\n      db.collection('events').doc(\"\".concat(eventNameRef.current)).get().then(function (snapshot) {\n        console.log(snapshot.data());\n        imageUrl = snapshot.data().url; // storage.refFromURL(imageUrl)\n        // .then(ref => {\n        //     ref.delete()\n        //     .then(() =>{\n        //         alert('האירוע נמחק בהצלחה')\n        //         setopen(false)\n        //     })\n        // })\n      });\n    });\n  };\n\n  useEffect(function () {\n    console.log(modalIsOpen);\n    db.collection('FeedBack').get().then(function (querySnapshot) {\n      querySnapshot.forEach(function (item) {\n        objArray.push({\n          name: item.data().name,\n          feedBackText: item.data().feedBackTxt,\n          delete: /*#__PURE__*/React.createElement(MDBBtn, {\n            size: \"sm\",\n            outline: true,\n            color: \"danger\",\n            id: \"\".concat(item.data().feedBackTxt),\n            onClick: areYouSure,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 33\n            }\n          }, \"\\u05DE\\u05D7\\u05E7\"),\n          participants: /*#__PURE__*/React.createElement(MDBBtn, {\n            size: \"sm\",\n            outline: true,\n            color: \"blue\",\n            id: \"\".concat(item.data().feedBackTxt),\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 39\n            }\n          }, \"\\u05E6\\u05E4\\u05D9\\u05D9\\u05D4 \\u05D1\\u05E0\\u05E8\\u05E9\\u05DE\\u05D9\\u05DD\")\n        });\n      });\n      setfeedBacks(objArray);\n    });\n  }, [open, modalIsOpen]);\n  return /*#__PURE__*/React.createElement(MDBContainer, {\n    style: {\n      backgroundColor: \"white\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(MDBDataTable, {\n    entriesLabel: \"\\u05DE\\u05E1\\u05E4\\u05E8 \\u05D4\\u05E2\\u05E8\\u05DB\\u05D9\\u05DD \\u05D1\\u05D8\\u05D1\\u05DC\\u05D4\",\n    paginationLabel: [\"הקודם\", \"הבא\"],\n    infoLabel: [\"מראה\", \"עד\", \"מתוך\", \"ערכים\"],\n    className: \"text-right justify-content-center\",\n    searchLabel: \"\\u05D7\\u05D9\\u05E4\\u05D5\\u05E9\",\n    btn: true,\n    scrollY: true,\n    maxHeight: \"65vh\",\n    striped: true,\n    bordered: true,\n    small: true,\n    data: data,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(MDBModal, {\n    isOpen: open,\n    toggle: function toggle() {\n      return setopen(false);\n    },\n    backdrop: true,\n    size: \"sm\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MDBModalHeader, {\n    style: {\n      backgroundColor: \"#ff4444\"\n    },\n    className: \"text-white justify-content-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }, \"\\u05D4\\u05D0\\u05DD \\u05DC\\u05DE\\u05D7\\u05D5\\u05E7 \\u05D0\\u05EA \\u05D4\\u05E4\\u05D9\\u05D3\\u05D1\\u05E7?\"), /*#__PURE__*/React.createElement(MDBModalFooter, {\n    className: \"justify-content-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(MDBBtn, {\n    color: \"danger\",\n    onClick: function onClick() {\n      return setopen(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 21\n    }\n  }, \"\\u05D1\\u05D9\\u05D8\\u05D5\\u05DC\"), /*#__PURE__*/React.createElement(MDBBtn, {\n    outline: true,\n    color: \"danger\",\n    onClick: deleteHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 21\n    }\n  }, \"\\u05DE\\u05D7\\u05E7\"))), /*#__PURE__*/React.createElement(MDBRow, {\n    className: \"text-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(UploadEvent, {\n    value: function value(i) {\n      return setmodalIsOpen({\n        index: i\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  })));\n};\n\nexport default FeedBackTableNew;","map":{"version":3,"sources":["/Users/galshalom/Desktop/Social-Trip/src/Admin/Components/FeedBackTable.js"],"names":["React","MDBDataTable","MDBContainer","MDBIcon","MDBBtn","MDBModalFooter","MDBModalBody","MDBModalHeader","MDBModal","MDBRow","useEffect","useState","useRef","storage","db","Upload","FeedBackTableNew","open","setopen","feedBackNameRef","FeedBackTextRef","feedBacks","setfeedBacks","index","modalIsOpen","setmodalIsOpen","objArray","data","columns","label","field","sort","width","rows","areYouSure","feedBack","current","target","id","deleteHandler","collection","doc","delete","then","eventNameRef","get","snapshot","console","log","imageUrl","url","querySnapshot","forEach","item","push","name","feedBackText","feedBackTxt","participants","backgroundColor","i"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { MDBDataTable, MDBContainer, MDBIcon, MDBBtn, MDBModalFooter, MDBModalBody, MDBModalHeader, MDBModal, MDBRow } from 'mdbreact';\nimport { useEffect, useState, useRef } from 'react'\nimport { storage, db } from '../../index'\nimport Upload from '../UploadEvent'\n\nconst FeedBackTableNew = () => {\n    const [open, setopen] = useState(false)\n    const feedBackNameRef = useRef(null)\n    const FeedBackTextRef = useRef(null)\n     const [feedBacks, setfeedBacks] = useState([])\n    const [modalIsOpen, setmodalIsOpen] = useState({ index: 1 })\n    const objArray = []\n    const data = {\n        columns: [\n            {\n                label: 'שם כותב הפידבק',\n                field: 'name',\n                sort: 'asc',\n                width: 150\n            },\n            {\n                label: 'תוכן הפידבק',\n                field: 'date',\n                sort: 'asc',\n                width: 270\n            },\n            {\n                label: 'מחק פידבק',\n                field: 'delete',\n                sort: 'asc',\n                width: 100\n            },\n        ],\n\n        rows: feedBacks\n\n\n    };\n\n    const areYouSure = (feedBack) => {\n        feedBackNameRef.current = feedBack.target.id\n        setopen(true)\n    }\n\n    const deleteHandler = () => {\n        // var imageUrl\n        db.collection('FeedBack').doc(`${feedBackNameRef.current}`).delete()\n            .then(() => {\n                db.collection('events').doc(`${eventNameRef.current}`).get()\n                .then(snapshot => {\n                    console.log(snapshot.data())\n                imageUrl = snapshot.data().url\n\n                // storage.refFromURL(imageUrl)\n                // .then(ref => {\n                //     ref.delete()\n                //     .then(() =>{\n                //         alert('האירוע נמחק בהצלחה')\n                //         setopen(false)\n                //     })\n                // })\n                })\n\n            })\n    }\n\n    useEffect(() => {\n        console.log(modalIsOpen)\n        db.collection('FeedBack').get()\n            .then(querySnapshot => {\n                querySnapshot.forEach(item => {\n                    objArray.push({\n                        name: item.data().name,\n                        feedBackText: item.data().feedBackTxt,\n                        delete: <MDBBtn size=\"sm\" outline color=\"danger\" id={`${item.data().feedBackTxt}`} onClick={areYouSure} >מחק</MDBBtn>,\n                        participants: <MDBBtn size=\"sm\" outline color=\"blue\" id={`${item.data().feedBackTxt}`} >צפייה בנרשמים</MDBBtn>\n                    })\n                })\n                setfeedBacks(objArray)\n            })\n    }, [open, modalIsOpen])\n\n    return (\n        <MDBContainer style={{ backgroundColor: \"white\" }}>\n            <MDBDataTable\n                entriesLabel=\"מספר הערכים בטבלה\"\n                paginationLabel={[\"הקודם\", \"הבא\"]}\n                infoLabel={[\"מראה\", \"עד\", \"מתוך\", \"ערכים\"]}\n                className=\"text-right justify-content-center\"\n                searchLabel=\"חיפוש\"\n                btn\n                scrollY\n                maxHeight=\"65vh\"\n                striped\n                bordered\n                small\n                data={data}\n            />\n            <MDBModal isOpen={open} toggle={() => setopen(false)}\n                backdrop={true}\n                size=\"sm\"\n            >\n                <MDBModalHeader style={{ backgroundColor: \"#ff4444\" }} className=\"text-white justify-content-center\" >האם למחוק את הפידבק?</MDBModalHeader>\n                <MDBModalFooter className=\"justify-content-center\">\n                    <MDBBtn color=\"danger\" onClick={() => setopen(false)}>ביטול</MDBBtn>\n                    <MDBBtn outline color=\"danger\" onClick={deleteHandler}>מחק</MDBBtn>\n                </MDBModalFooter>\n            </MDBModal>\n            <MDBRow className=\"text-center\">\n                <UploadEvent value={(i) => setmodalIsOpen({ index: i })} />\n            </MDBRow>\n        </MDBContainer>\n    );\n}\n\nexport default FeedBackTableNew;"]},"metadata":{},"sourceType":"module"}