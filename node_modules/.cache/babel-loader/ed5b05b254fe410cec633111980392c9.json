{"ast":null,"code":"import _slicedToArray from \"/Users/galshalom/Desktop/Social-Trip/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/galshalom/Desktop/Social-Trip/src/Admin/Components/TimeLineTable.js\";\n\nimport React from \"react\";\nimport { MDBDataTable, MDBContainer, MDBBtn, MDBModalFooter, MDBModalHeader, MDBModal, MDBModalBody, MDBInput } from \"mdbreact\";\nimport { useEffect, useState, useRef } from \"react\";\nimport { db } from \"../../index\";\nimport \"../../css/Admin.css\";\nimport autosize from \"autosize\";\n\nvar TimeLineTable = function TimeLineTable() {\n  autosize(document.querySelector(\"textarea\"));\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      open = _useState2[0],\n      setopen = _useState2[1];\n\n  var eventIdRef = useRef(null);\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      eventDate = _useState4[0],\n      setDate = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      eventTitle = _useState6[0],\n      setTitle = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      eventContent = _useState8[0],\n      setContent = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      timeLineEvents = _useState10[0],\n      setEvents = _useState10[1];\n\n  var _useState11 = useState({\n    index: 1\n  }),\n      _useState12 = _slicedToArray(_useState11, 2),\n      modalIsOpen = _useState12[0],\n      setmodalIsOpen = _useState12[1];\n\n  var objArray = [];\n  var data = {\n    columns: [{\n      label: \"תאריך אירוע\",\n      field: \"date\",\n      sort: \"asc\",\n      width: 80\n    }, {\n      label: \"כותרת\",\n      field: \"title\",\n      sort: \"asc\",\n      width: 100\n    }, {\n      label: \"תוכן\",\n      field: \"content\",\n      sort: \"asc\",\n      width: 270\n    }, {\n      label: \"ערוך אירוע\",\n      field: \"edit\",\n      width: 100\n    }],\n    rows: timeLineEvents\n  };\n\n  var editModal = function editModal(event) {\n    var x = event.target.closest(\"tr\").querySelectorAll(\"td\");\n    eventIdRef.current = event.target.id;\n    setDate(x[0].innerHTML.split(\"/\").reverse().join(\"-\"));\n    setTitle(x[1].innerHTML);\n    setContent(x[2].innerHTML);\n    setopen(true);\n  };\n\n  var editHandler = function editHandler(event) {\n    event.preventDefault();\n    if (!event.target.classList.contains(\"was-validated\")) event.target.className += \" was-validated\";\n\n    if (event.target.checkValidity()) {\n      db.collection(\"TimeLineEvents\").doc(\"\".concat(eventIdRef.current)).update({\n        date: item.data().date,\n        title: item.data().title,\n        content: item.data().content\n      }).then(function () {\n        console.log(\"Document successfully updated!\");\n      }).catch(function (error) {\n        console.error(\"Document was not update : \", error);\n      });\n    }\n  };\n\n  useEffect(function () {\n    db.collection(\"TimeLineEvents\").get().then(function (querySnapshot) {\n      querySnapshot.forEach(function (item) {\n        console.log(item.data().title);\n        objArray.push({\n          date: item.data().date,\n          title: item.data().title,\n          content: item.data().content,\n          edit: /*#__PURE__*/React.createElement(MDBBtn, {\n            size: \"sm\",\n            outline: true,\n            color: \"primary\",\n            id: \"\".concat(item.id),\n            onClick: editModal,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 15\n            }\n          }, \"\\u05E2\\u05E8\\u05D5\\u05DA \\u05D0\\u05D9\\u05E8\\u05D5\\u05E2\")\n        });\n      });\n      setEvents(objArray);\n    });\n  }, [open, modalIsOpen]);\n  return /*#__PURE__*/React.createElement(MDBContainer, {\n    style: {\n      backgroundColor: \"white\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(MDBDataTable, {\n    entriesLabel: \"\\u05DE\\u05E1\\u05E4\\u05E8 \\u05D4\\u05E2\\u05E8\\u05DB\\u05D9\\u05DD \\u05D1\\u05D8\\u05D1\\u05DC\\u05D4\",\n    paginationLabel: [\"הקודם\", \"הבא\"],\n    infoLabel: [\"מראה\", \"עד\", \"מתוך\", \"ערכים\"],\n    className: \"text-right justify-content-center\",\n    searchLabel: \"\\u05D7\\u05D9\\u05E4\\u05D5\\u05E9\",\n    btn: true,\n    scrollY: true,\n    maxHeight: \"65vh\",\n    striped: true,\n    bordered: true,\n    small: true,\n    data: data,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(MDBModal, {\n    isOpen: open,\n    toggle: function toggle() {\n      return setopen(false);\n    },\n    backdrop: true,\n    size: \"md\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(MDBModalHeader, {\n    style: {\n      backgroundColor: \"\"\n    },\n    className: \"justify-content-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }, \"\\u05E2\\u05E8\\u05D5\\u05DA \\u05D0\\u05EA \\u05D4\\u05D0\\u05D9\\u05E8\\u05D5\\u05E2\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"needs-validation\",\n    noValidate: true,\n    onSubmit: editHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(MDBModalBody, {\n    style: {\n      maxHeight: \"130vh\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(MDBInput, {\n    className: \"text-right\",\n    required: true,\n    value: eventDate,\n    labelClass: \"col text-right\",\n    label: \"\\u05EA\\u05D0\\u05E8\\u05D9\\u05DA \\u05D4\\u05D0\\u05D9\\u05E8\\u05D5\\u05E2\",\n    className: \"col text-right\",\n    type: \"date\",\n    getValue: function getValue(e) {\n      setDate(e);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 15\n    }\n  }, \"\\u05D7\\u05D5\\u05D1\\u05D4 \\u05DC\\u05D4\\u05DB\\u05E0\\u05D9\\u05E1 \\u05EA\\u05D5\\u05DB\\u05DF\")), /*#__PURE__*/React.createElement(MDBInput, {\n    required: true,\n    dir: \"rtl\",\n    maxLength: \"70\",\n    type: \"text\",\n    value: eventTitle,\n    labelClass: \"col text-right\",\n    label: \"\\u05DB\\u05D5\\u05EA\\u05E8\\u05EA \\u05D4\\u05D0\\u05D9\\u05E8\\u05D5\\u05E2\",\n    className: \"col text-right\",\n    getValue: function getValue(e) {\n      setTitle(e);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 15\n    }\n  }, \"\\u05D7\\u05D5\\u05D1\\u05D4 \\u05DC\\u05D4\\u05DB\\u05E0\\u05D9\\u05E1 \\u05EA\\u05D5\\u05DB\\u05DF\")), /*#__PURE__*/React.createElement(MDBInput, {\n    required: true,\n    dir: \"rtl\",\n    rows: 2,\n    resize: \"none\",\n    maxLength: 70,\n    type: \"textarea\",\n    labelClass: \"col text-right\",\n    label: \"\\u05EA\\u05D5\\u05DB\\u05DF \\u05D4\\u05D0\\u05D9\\u05E8\\u05D5\\u05E2\",\n    value: eventContent,\n    className: \"col text-right\",\n    getValue: function getValue(e) {\n      setContent(e);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 15\n    }\n  }, \"\\u05D7\\u05D5\\u05D1\\u05D4 \\u05DC\\u05D4\\u05DB\\u05E0\\u05D9\\u05E1 \\u05EA\\u05D5\\u05DB\\u05DF\"))), /*#__PURE__*/React.createElement(MDBModalFooter, {\n    className: \"justify-content-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(MDBBtn, {\n    color: \"secondary\",\n    onClick: function onClick() {\n      return setopen(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 13\n    }\n  }, \"\\u05D1\\u05D9\\u05D8\\u05D5\\u05DC\"), /*#__PURE__*/React.createElement(MDBBtn, {\n    type: \"submit\",\n    color: \"primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 13\n    }\n  }, \"\\u05E1\\u05D9\\u05D9\\u05DD\")))));\n};\n\nexport default TimeLineTable;","map":{"version":3,"sources":["/Users/galshalom/Desktop/Social-Trip/src/Admin/Components/TimeLineTable.js"],"names":["React","MDBDataTable","MDBContainer","MDBBtn","MDBModalFooter","MDBModalHeader","MDBModal","MDBModalBody","MDBInput","useEffect","useState","useRef","db","autosize","TimeLineTable","document","querySelector","open","setopen","eventIdRef","eventDate","setDate","eventTitle","setTitle","eventContent","setContent","timeLineEvents","setEvents","index","modalIsOpen","setmodalIsOpen","objArray","data","columns","label","field","sort","width","rows","editModal","event","x","target","closest","querySelectorAll","current","id","innerHTML","split","reverse","join","editHandler","preventDefault","classList","contains","className","checkValidity","collection","doc","update","date","item","title","content","then","console","log","catch","error","get","querySnapshot","forEach","push","edit","backgroundColor","maxHeight","e"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {\n  MDBDataTable,\n  MDBContainer,\n  MDBBtn,\n  MDBModalFooter,\n  MDBModalHeader,\n  MDBModal,\n  MDBModalBody,\n  MDBInput,\n} from \"mdbreact\";\nimport { useEffect, useState, useRef } from \"react\";\nimport { db } from \"../../index\";\nimport \"../../css/Admin.css\";\nimport autosize from \"autosize\";\n\nconst TimeLineTable = () => {\n  autosize(document.querySelector(\"textarea\"));\n  const [open, setopen] = useState(false);\n  const eventIdRef = useRef(null);\n  const [eventDate, setDate] = useState(\"\");\n  const [eventTitle, setTitle] = useState(\"\");\n  const [eventContent, setContent] = useState(\"\");\n  const [timeLineEvents, setEvents] = useState([]);\n  const [modalIsOpen, setmodalIsOpen] = useState({ index: 1 });\n  const objArray = [];\n  const data = {\n    columns: [\n      {\n        label: \"תאריך אירוע\",\n        field: \"date\",\n        sort: \"asc\",\n        width: 80,\n      },\n      {\n        label: \"כותרת\",\n        field: \"title\",\n        sort: \"asc\",\n        width: 100,\n      },\n      {\n        label: \"תוכן\",\n        field: \"content\",\n        sort: \"asc\",\n        width: 270,\n      },\n      {\n        label: \"ערוך אירוע\",\n        field: \"edit\",\n        width: 100,\n      },\n    ],\n\n    rows: timeLineEvents,\n  };\n\n  const editModal = (event) => {\n    var x = event.target.closest(\"tr\").querySelectorAll(\"td\");\n    eventIdRef.current = event.target.id;\n    setDate(x[0].innerHTML.split(\"/\").reverse().join(\"-\"));\n    setTitle(x[1].innerHTML);\n    setContent(x[2].innerHTML);\n    setopen(true);\n  };\n\n  const editHandler = (event) => {\n    event.preventDefault();\n    if (!event.target.classList.contains(\"was-validated\"))\n      event.target.className += \" was-validated\";\n    if (event.target.checkValidity()) {\n      db.collection(\"TimeLineEvents\")\n        .doc(`${eventIdRef.current}`)\n        .update({\n          date: item.data().date,\n            title: item.data().title,\n            content: item.data().content,\n        })\n        .then(function () {\n          console.log(\"Document successfully updated!\");\n        }).catch(function (error) {\n          console.error(\"Document was not update : \", error);\n        });\n    }\n  };\n\n  useEffect(() => {\n    db.collection(\"TimeLineEvents\")\n      .get()\n      .then((querySnapshot) => {\n        querySnapshot.forEach((item) => {\n          console.log(item.data().title);\n          objArray.push({\n            date: item.data().date,\n            title: item.data().title,\n            content: item.data().content,\n            edit: (\n              <MDBBtn\n                size=\"sm\"\n                outline\n                color=\"primary\"\n                id={`${item.id}`}\n                onClick={editModal}\n              >\n                ערוך אירוע\n              </MDBBtn>\n            ),\n          });\n        });\n        setEvents(objArray);\n      });\n  }, [open, modalIsOpen]);\n\n  return (\n    <MDBContainer style={{ backgroundColor: \"white\" }}>\n      <MDBDataTable\n        entriesLabel=\"מספר הערכים בטבלה\"\n        paginationLabel={[\"הקודם\", \"הבא\"]}\n        infoLabel={[\"מראה\", \"עד\", \"מתוך\", \"ערכים\"]}\n        className=\"text-right justify-content-center\"\n        searchLabel=\"חיפוש\"\n        btn\n        scrollY\n        maxHeight=\"65vh\"\n        striped\n        bordered\n        small\n        data={data}\n      />\n      <MDBModal\n        isOpen={open}\n        toggle={() => setopen(false)}\n        backdrop={true}\n        size=\"md\"\n      >\n        <MDBModalHeader\n          style={{ backgroundColor: \"\" }}\n          className=\"justify-content-center\"\n        >\n          ערוך את האירוע\n        </MDBModalHeader>\n        <form className=\"needs-validation\" noValidate onSubmit={editHandler}>\n          <MDBModalBody style={{ maxHeight: \"130vh\" }}>\n            <MDBInput\n              className=\"text-right\"\n              required\n              value={eventDate}\n              labelClass=\"col text-right\"\n              label=\"תאריך האירוע\"\n              className={\"col text-right\"}\n              type=\"date\"\n              getValue={(e) => {\n                setDate(e);\n              }}\n            >\n              <div className=\"invalid-feedback\">חובה להכניס תוכן</div>\n            </MDBInput>\n            <MDBInput\n              required\n              dir=\"rtl\"\n              maxLength=\"70\"\n              type=\"text\"\n              value={eventTitle}\n              labelClass=\"col text-right\"\n              label=\"כותרת האירוע\"\n              className={\"col text-right\"}\n              getValue={(e) => {\n                setTitle(e);\n              }}\n            >\n              <div className=\"invalid-feedback\">חובה להכניס תוכן</div>\n            </MDBInput>\n            <MDBInput\n              required\n              dir=\"rtl\"\n              rows={2}\n              resize=\"none\"\n              maxLength={70}\n              type=\"textarea\"\n              labelClass=\"col text-right\"\n              label=\"תוכן האירוע\"\n              value={eventContent}\n              className={\"col text-right\"}\n              getValue={(e) => {\n                setContent(e);\n              }}\n            >\n              <div className=\"invalid-feedback\">חובה להכניס תוכן</div>\n            </MDBInput>\n          </MDBModalBody>\n          <MDBModalFooter className=\"justify-content-center\">\n            <MDBBtn color=\"secondary\" onClick={() => setopen(false)}>\n              ביטול\n            </MDBBtn>\n            <MDBBtn type=\"submit\" color=\"primary\">\n              סיים\n            </MDBBtn>\n          </MDBModalFooter>\n        </form>\n      </MDBModal>\n    </MDBContainer>\n  );\n};\n\nexport default TimeLineTable;\n"]},"metadata":{},"sourceType":"module"}